<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Una</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
    <script type="text/javascript" src="//use.typekit.net/pzc2bqk.js"></script>
    <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="img/favicon.png">
    <link rel="stylesheet" href="css/style.css">
    <script src="js/vendor/modernizr-2.6.2.min.js"></script>
  </head>
  <body>
    <!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Add your site or application content here -->
    <header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role="banner">
      <div class="container">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="index.html" class="navbar-brand"><img class="logo" src="img/logo.png" width="100"/></a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
          <ul class="nav navbar-nav">
            <li>
              <a href="https://github.com/una-org/una/blob/master/QUICKSTART.md" target="_blank">Documentation</a>
            </li>
            <li>
              <a href="https://github.com/una-org/una/blob/master/API.md" target="_blank">API</a>
            </li>
            <li>
              <a href="demos.html">Demos</a>
            </li>
            <li>
              <a href="about.html">About</a>
            </li>
            <li>
              <a href="https://github.com/una-org/una" target="_blank">Github</a>
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <div class="page-content-container">
      <div class="container landingdocs-container">
        <div class="row">
          <!-- <div class="col-md-3">
            <div class="panel affix-top" role="complementary" data-spy="affix" data-offset-top="200" data-offset-bottom="10" id="sidenav" style="">
              <ul id="sectionmenu" class="nav">
                <li><a href="#" class="scrollnavdocs"></a></li>
                <li class=""><a href="#technology-overview" class="scrollnavdocs">Technology Overview</a></li>
                <li class=""><a href="#una-server-installation" class="scrollnavdocs">Una Server Installation</a></li>
                <li class=""><a href="#start-togetherjs-button" class="scrollnavdocs">Start TogetherJS Button</a></li>
                <li class=""><a href="#about-audio-chat-and-webrtc" class="scrollnavdocs">About Audio Chat and WebRTC</a></li>
                <li class=""><a href="#extending-togetherjs" class="scrollnavdocs">Extending TogetherJS</a></li>
                <li class=""><a href="#communication-channel" class="scrollnavdocs">Communication Channel</a></li>
                <li class=""><a href="#setting-identity-information" class="scrollnavdocs">Setting Identity Information</a></li>
                <li class=""><a href="#getting-a-static-copy-of-the-client" class="scrollnavdocs">Getting a Static Copy of the Client</a></li>
                <li class=""><a href="#browser-support" class="scrollnavdocs">Browser Support</a></li>
                <li class=""><a href="#hosting-the-hub-server" class="scrollnavdocs">Hosting the Hub Server</a></li>
                <li class=""><a href="#addons" class="scrollnavdocs">Addons</a></li>
                <li class=""><a href="#getting-help" class="scrollnavdocs">Getting Help</a></li>
              </ul>
            </div>
          </div> -->
          <div class="col-md-12">
              <article id="docs-content" class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
                <a name="quick-start" class="anchor" href="#quick-start"><span class="octicon octicon-link"></span></a>Quick Start</h1>
                <hr/>
                <h2>
                <a name="technological-overview" class="anchor" href="#technological-overview"><span class="octicon octicon-link"></span></a>Technological Overview</h2>

                <p>In Una, there are two kinds of clients:</p>

                <ul>
                <li>
                <strong>Screen</strong>: The centralized display that performs the bulk of the processing, usually accessed via a browser on a desktop/laptop.</li>
                <li>
                <strong>Controller</strong>: The medium for user input, usually accessed via a browser on a mobile device. </li>
                </ul><p>The Una Server acts as a relay between the Screen and the Controller(s), passing messages between them. By
                doing so, we can keep the Server footprint small with minimal processing, (as all we are doing is relaying messages between the Screen and Controller).</p>

                <p>Both the Screen and the Controller comprises of client-side JavaScript code, and are connected
                to the Server via websockets through socket.io. The Una Server is written in node.js.</p>

                <p>Una makes it easy for you to write client-to-client code that is supported
                via websockets, having you to write little, if any, server-side code.</p>

                <h2>
                <a name="una-server-installation" class="anchor" href="#una-server-installation"><span class="octicon octicon-link"></span></a>Una Server Installation</h2>

                <p>As Una is a node.js library, you will need to have node.js installed on your
                server in order to use it. Follow the instructions below to install
                node.js on your platform of choice.</p>

                <p>Una is available as a package in npm. To install Una to your project, simply
                type the following in shell:</p>

                <pre lang="shell"><code>npm install una
                </code></pre>

                <p>And you are done!</p>

                <h2>
                <a name="the-una-server" class="anchor" href="#the-una-server"><span class="octicon octicon-link"></span></a>The Una Server</h2>

                <h3>
                <a name="installing" class="anchor" href="#installing"><span class="octicon octicon-link"></span></a>Installing</h3>

                <p>After installing Una, create an <code>app.js</code> file, which would be the starting point of
                your node.js application. Type the following code:</p>

                <div class="highlight highlight-javascript"><pre><span class="nx">una</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'una'</span><span class="p">);</span>

                <span class="nx">una</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3216</span><span class="p">);</span>
                </pre></div>

                <p>Run your node.js application in shell with:</p>

                <pre lang="shell"><code>$ node app.js
                   info - socket.io started
                   Una server listening on port 3216
                </code></pre>

                <p>Note: Una is built on top of express and socket.io, hence, these dependencies are automatically installed when you install Una.</p>

                <p><code>una.listen</code> takes in a port number, and creates a HttpServer listening on that
                port number, running the express framework. In addition, it also launches the
                socket.io client listening on the same port. To gain access to the express app
                object and the socket.io io object, use the following code:</p>

                <div class="highlight highlight-javascript"><pre><span class="c1">// express app instance:</span>
                <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">una</span><span class="p">.</span><span class="nx">app</span><span class="p">;</span>

                <span class="c1">// socket.io io instance</span>
                <span class="kd">var</span> <span class="nx">io</span> <span class="o">=</span> <span class="nx">una</span><span class="p">.</span><span class="nx">io</span><span class="p">;</span>

                <span class="c1">// express library:</span>
                <span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">una</span><span class="p">.</span><span class="nx">express</span><span class="p">;</span>
                </pre></div>

                <h3>
                <a name="serving-static-html-files" class="anchor" href="#serving-static-html-files"><span class="octicon octicon-link"></span></a>Serving Static HTML Files</h3>

                <p>We want a way to serve static HTML files using the express framework. Modify <code>app.js</code> to the following:</p>

                <div class="highlight highlight-javascript"><pre><span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'path'</span><span class="p">);</span>
                <span class="nx">una</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'una'</span><span class="p">);</span>

                <span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">una</span><span class="p">.</span><span class="nx">app</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">express</span> <span class="o">=</span> <span class="nx">una</span><span class="p">.</span><span class="nx">express</span><span class="p">;</span>

                <span class="c1">// Configure express to use the /public folder to serve static files</span>
                <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">express</span><span class="p">.</span><span class="kr">static</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">'public'</span><span class="p">));</span>

                <span class="nx">una</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="mi">3216</span><span class="p">);</span>
                </pre></div>

                <p>This will configure express to serve static files from the <code>/public</code> directory.
                Since Una is a wrapper around express and socket.io, you may use the express
                client to serve other routes that your application needs.</p>

                <h2>
                <a name="una-screen-and-controller" class="anchor" href="#una-screen-and-controller"><span class="octicon octicon-link"></span></a>Una Screen and Controller</h2>

                <h3>
                <a name="room" class="anchor" href="#room"><span class="octicon octicon-link"></span></a>Room</h3>

                <p>In Una, rooms are thought of as collections of Screen and Controllers. The Screen and Controllers can only communicate with each
                other if they are in the same room. You can think of a room as an instance
                of a game, where there is one Screen which shows the state of that room,
                and controllers which would be changing the state of the room by
                sending messages to the Screen.</p>

                <p>Note that in relay mode, there can only be <strong>one</strong> Screen active at any time
                for each room. All the controllers in that room TODO</p>

                <h3>
                <a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h3>

                <p>For your client side Una code, you would need to include the following 
                javascript file in your HTML code:</p>

                <div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'/socket.io/socket.io.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
                <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">'/una_js/una.js'</span><span class="nt">&gt;&lt;/script&gt;</span>
                </pre></div>

                <h3>
                <a name="registration" class="anchor" href="#registration"><span class="octicon octicon-link"></span></a>Registration</h3>

                <p>You will need to identify whether the page is to be used as a Screen or as
                a Controller, by calling the registration method. </p>

                <p><strong>Screen</strong></p>

                <div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">room_id</span> <span class="o">=</span> <span class="s1">'room1'</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">screen_data</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">'screen'</span><span class="p">};</span>
                <span class="nx">UnaScreen</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">room_id</span><span class="p">,</span> <span class="nx">screen_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Screen registered successfully</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="c1">// Screen registration failed</span>
                    <span class="p">}</span>
                <span class="p">});</span>
                </pre></div>

                <p><strong>Controller</strong></p>

                <div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">room_id</span> <span class="o">=</span> <span class="s1">'room1'</span><span class="p">;</span>
                <span class="kd">var</span> <span class="nx">controller_data</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="s1">'player1'</span><span class="p">};</span>
                <span class="nx">UnaController</span><span class="p">.</span><span class="nx">register</span><span class="p">(</span><span class="nx">room_id</span><span class="p">,</span> <span class="nx">controller_data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">if</span> <span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">success</span><span class="p">)</span> <span class="p">{</span>
                        <span class="c1">// Controller registered successfully</span>
                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                        <span class="c1">// Controller registration failed</span>
                    <span class="p">}</span>
                <span class="p">});</span>
                </pre></div>

                <p>The first parameter of the register method is the room id, a unique string that identifies the room. 
                The second parameter is the client data, and it can contain any Javascript object that will be used to identify this particular client.
                All subsequent messages sent from the page will include this client data object for the receiver to identify the origin of the messages.</p>

                <h3>
                <a name="sending-data" class="anchor" href="#sending-data"><span class="octicon octicon-link"></span></a>Sending Data</h3>

                <p>To send data, use the following <code>sendTo</code> methods:</p>

                <p><strong>Controller</strong></p>

                <div class="highlight highlight-javascript"><pre><span class="nx">UnaController</span><span class="p">.</span><span class="nx">sendToScreen</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">type_of_event</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">data</span><span class="o">:</span> <span class="s1">'data'</span> <span class="p">});</span>
                </pre></div>

                <p><code>&lt;type_of_event&gt;</code> is a string, which the Screen will use to identify the type of <code>sendTo</code> event,
                and the second parameter is a JavaScript object of the data to send to the screen.</p>

                <p><strong>Screen</strong></p>

                <div class="highlight highlight-javascript"><pre><span class="nx">UnaScreen</span><span class="p">.</span><span class="nx">sendToController</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">controller_id</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">type_of_event</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">{</span><span class="nx">data</span><span class="o">:</span> <span class="s1">'data'</span><span class="p">})</span>
                </pre></div>

                <p>The Screen can also send data to a particular controller. The <code>&lt;controller_id&gt;</code> can
                be obtained from <code>res.una.id</code> of the controller when it was first registered,
                or after an <code>onControllerInput</code> event.</p>

                <h3>
                <a name="receiving-data" class="anchor" href="#receiving-data"><span class="octicon octicon-link"></span></a>Receiving Data</h3>

                <p>To listen for data, use the following <code>onInput</code> methods:</p>

                <p><strong>Controller</strong></p>

                <div class="highlight highlight-javascript"><pre><span class="nx">UnaController</span><span class="p">.</span><span class="nx">onScreenInput</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">type_of_event</span><span class="o">&gt;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// &lt;type_of_event&gt;: This string should correspond to the string passed in to the `sendToController` function from the Screen</span>
                    <span class="c1">// res.una: Una header</span>
                    <span class="c1">// res.una.user_data: The user data of the Screen sender</span>
                    <span class="c1">// res.una.id: Unique id of the sender</span>
                    <span class="c1">// res.payload: Payload object that was sent by the screen</span>
                <span class="p">});</span>
                </pre></div>

                <p><strong>Screen</strong></p>

                <div class="highlight highlight-javascript"><pre><span class="nx">UnaScreen</span><span class="p">.</span><span class="nx">onControllerInput</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">type_of_event</span><span class="o">&gt;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
                    <span class="c1">// &lt;type_of_event&gt;: This string should correspond to the string passed in to the `sendToScreen` function from the Controller</span>
                    <span class="c1">// res.una: Una header</span>
                    <span class="c1">// res.una.user_data: The user data of the Controller sender</span>
                    <span class="c1">// res.una.id: Unique id of the sender</span>
                    <span class="c1">// res.payload: Payload object that was sent by the controller</span>
                <span class="p">});</span>
                </pre></div>

                <p><code>res.una</code> is the Una Header attached to every message, and contains:</p>

                <ul>
                <li>
                <code>user_data</code> that was supplied when the Screen/Controller was registered</li>
                <li>
                <code>id</code>, a unique id identifying the client</li>
                </ul></article>
          </div>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <p>&copy; 2013 Una Project. </p>
          </div>
        </div>
      </div>
    </footer>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
    <script src="js/vendor/waypoints.min.js"></script>
    <script src="js/vendor/fastclick.min.js"></script>
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
    <script>
        (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
        function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
        e=o.createElement(i);r=o.getElementsByTagName(i)[0];
        e.src='http://www.google-analytics.com/analytics.js';
        r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
        ga('create','UA-XXXXX-X');ga('send','pageview');
    </script>
  </body>
</html>
